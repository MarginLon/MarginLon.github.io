---
title: "JavaScript 同步异步编程和事件循环"
date: 2020-10-20T20:02:39+08:00
draft: false
---
# Content
- 同步异步编程和事件循环
---
# 同步异步编程和事件循环
- 进程和线程
    - 1个进程包含多个线程
    - 进程：程序（一个页面）
    - 线程：一个线程处理一个任务
    - 浏览器多线程：
        - HTTP网络线程：资源文件加载
        - GUI渲染线程：页面自上而下渲染，绘制页面
        - JS渲染线程：用于渲染JS代码
    - JS单线程：浏览器只开辟一个线程渲染JS，JS本质都是同步的。
    - JS异步：基于多线程结合EventLoop事件循环，构建异步效果。
        - 定时器:设置定时器是同步的过程，而间隔[Interval]后触发绑定方法执行是异步的
- ECstack（栈内存）
    - 代码执行”JS渲染线程“自上而下解析执行，即【主线程】。
- Event Queue 事件队列 【等待任务队列】
    - 浏览器加载页面产生，存储待执行的任务，<span style="color:red">优先级队列</span>
        - 微任务队列：（先找）如果微任务队列没有，则在去宏任务队列中查找
        - 宏任务队列：一般按照谁先到达执行条件
        
    - 代码执行过程中，只要创建一个异步的任务，则会进入EventQueue
        - 任务放置完成，不需要等待，主线程继续向下渲染同步的代码
        - 定时器或者事件绑定等创建的异步任务，放置到事件队列，浏览器开辟新线程 => 监听线程：监听定时器是否到达指定时间
        - <span style="color:red">同步任务执行完</span>，主线程空闲，才会看EQ中的等待任务，<span style="color:red">依次拿出来放置到栈内存，让主线程执行</span>，此任务执行完，主线程再次空闲，再去EQ中查找，即为<span style="color:red">EventLoop事件循环机制.</span>
- js渲染线程
    - 词法分析
    - 自上而下的代码分析为一个个任务，放在宏任务队列，词法分析完成，再执行。
- 例子
