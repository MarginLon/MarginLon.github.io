---
title: "Meme主题部署到GitHub Pages"
date: 2020-09-17T16:28:39+08:00
draft: false
---

本地运行[Meme主题](https://github.com/reuixiy/hugo-theme-meme)使用正常Hugo流程即可，注意使用__Extended__版本Hugo即可。简单叙述一下部署到Github Pages的流程，以供日后使用。

--------
# 本地安装Hugo（以windows例）
- 安装扩展版Hugo
- 检查命令：
>`hugo version`
- 建站命令：
>`hugo new site blog`
- Meme主题：
> ~ $ cd blog
> ~/blog $ git init
> ~/blog $ git submodule add --depth 1 https://github.com/reuixiy/hugo-theme-meme.git themes/meme
- 替换config：
> ~/blog $ rm config.toml
> ~/blog $ cp themes/meme/config-examples/zh-cn/config.toml config.toml
- 本地运行:
> hugo server -D
# 部署Github流程（以workflow方法）
- 正常部署hugo的命令：
> hugo --theme=meme --baseUrl="http://username.github.io" --buildDrafts
> //生成public文件夹
> cd public
> git init
> git add .
> git commit -m "info"
> git remote add origin http://github.com/username/username.github.io
> git push -u origin master
- Meme:
    1. 推送源码而非`public`
> //在blog下运行
> git remote add origin http://github.com/username/username.github.io
> git push -u origin master
    2. 新建workflow

    ```yml
    #.github/workflows/build.yml
    name: build

    on:
      push:
        branches:
        - master
    jobs:
      build:
        runs-on: ubuntu-latest

        steps:
        - name: 'Building...'
          uses: reuixiy/hugo-deploy@v1
          env:
            DEPLOY_REPO:username/username.github.io
            DEPLOY_BRANCH:build
            DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }}
            # https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
            TZ: Asia/Shanghai
      # DEPLOY_REPO为仓库 DEPLOY_BRANCH为分支 DEPLOY_KEY为私钥
    ```
 3. 生成公私钥
     - 公钥(id_rsa.pub)
       Settings > Deploy keys > Add deploy key
       勾选 Allow write access
     - 密钥(id_rsa)
       Settings > Secrets > New secret
       Name: DEPLOY_KEY
  4. push
     ```
     git add -A
     git commit -m "refactor: use hugo-deploy action"
     git push
     ```
  5.Action处查看日志，Settings > Options > Github Pages，Source中的Branch选为build，完成即可上线。
---
[Margin](https://marginlon.github.io/)
